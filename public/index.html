<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Learn Auth</title>
    <style>
        *, *::before, *::after {
            box-sizing: border-box;
        }

        :root {
            font-family: system-ui, -apple-system, BlinkMacSystemFont,
            'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell,
            'Open Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.5;
        }

        body {
            background: #f5f5f5;
            color: #2c3e50;
            max-width: 70ch;
            margin-inline: auto;
        }

        h1 {
            line-height: 1.2;
        }

        @media (prefers-color-scheme: dark) {
            body {
                background: #1a1a1a;
                color: #e0e0e0;
            }
        }
    </style>
</head>

<body>
<h1>Learn Auth</h1>
<h3>Registration</h3>
<form id="registration">
    <label>
        Email:
        <input type="email" name="email" autocomplete="autocomplete">
    </label>
    <label>
        Password:
        <input type="password" name="password">
    </label>
    <button type="submit">Register</button>
</form>
<script>
    {
        const form = document.getElementById("registration");
        form.addEventListener('submit', async (evt) => {
            evt.preventDefault();
            const values = Object.fromEntries(
                Object.values(form)
                    .filter(({name}) => name)
                    .map(({name, value}) => [name, value])
            );
            try {
                const response = await fetch('/api/register', {
                    method: 'POST',
                    body: JSON.stringify(values),
                    headers: {
                        'Content-Type': 'application/json; charset=UTF-8'
                    }
                })
            } catch (err) {
                console.error(err);
                throw Error('Failed to fetch.')
            }
        })
    }
</script>
</body>

</html>